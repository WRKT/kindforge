# KindForge

KindForge is a reproducible infrastructure toolkit that creates a secure, test-ready Kubernetes cluster using [Kind](https://kind.sigs.k8s.io/), [mkcert](https://github.com/FiloSottile/mkcert), and [cert-manager](https://github.com/cert-manager/cert-manager).

It is designed for Kubernetes enthusias, and developers who want:

- Local HTTPS endpoints via TLS automation with `mkcert`
- Built-in observability stack (Grafana, Prometheus, optional)
- Full automation via shell and Makefile scripts
- A one-command bootstrap the Kubernetes cluster (may need sudo password for some tools installation).

> Whether you're testing TLS, playing with Ingress, or preparing CI/CD pipelines â€” KindForge gives you a repeatable, versioned foundation.

## Features

- Kind cluster with custom name, port mapping, and no default CNI
- TLS certificate automation using `mkcert`
- Cert-manager with CA-based ClusterIssuer
- HTTPS-ready Ingress
- Prometheus + Grafana stack (optional)

---

## Getting Started

> Requirements: Docker, Bash, Helm, `mkcert`, `kubectl`

```shell
git clone https://github.com/WRKT/kindforge.git
cd kindforge
make install
```

## Trust the Local CA Certificate on Windows hosts

To ensure that your locally issued TLS certificates (via mkcert) are trusted by Windows and browsers like Firefox or Chromium:

1. Copy the CA certificate to a Windows-accessible location (on WSL, run these commands):

```shell
mkdir -p /mnt/c/Users/$USER/.wsl-certs
cp "$(mkcert -CAROOT)/rootCA.pem" /mnt/c/Users/$USER/.wsl-certs/
```
2. Open PowerShell as Administrator and run:

```ps1
$certPath = "$env:USERPROFILE\.wsl-certs\rootCA.pem"
$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2
$cert.Import($certPath)

$store = New-Object System.Security.Cryptography.X509Certificates.X509Store("Root","LocalMachine")
$store.Open("ReadWrite")
$store.Add($cert)
$store.Close()

Write-Host "[OK] Local CA added to Windows trusted root store"
```
> This allows local .localhost domains generated by mkcert to be trusted by Windows applications.
